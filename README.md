# My First Program

This repository demonstrates a small simulation for **dynamic coalition formation** in a caching collaboration scenario, plus a minimal "hello" example script.

## Repository layout
- `logic.py` — Coalition formation simulator: models leaders, servers, and vehicles; computes coalition value based on demand/capacity; repeatedly merges or migrates leaders to improve system welfare; allocates payoffs and records per-period snapshots with a mock TEE/ledger. Also includes plotting helpers for welfare, leader payoffs, and coalition sizes.
- `hello.py` — Tiny arithmetic demo with `add_and_double` and a CLI entry point.
- `ledger.jl` — Example append-only log produced by the simulator.
- `coalition_*.png` — Example plots generated by a prior simulation run.
- `test blackisort.py`, `vscode-colab-test0.ipynb` — Miscellaneous experiment files.

## How the simulator works (`logic.py`)
1. **Domain models**: `Leader`, `Server`, and `Vehicle` define supply/demand and costs. Leaders stay hashable so they can be stored in Python `set` objects.
2. **Value function**: `cache_value_with_requests` computes coalition value by balancing capacity, demand (including per-period request deltas), cooperation bonus, and coordination costs.
3. **Coalition search**: `dynamic_coalition_formation` applies best-merge and best-move steps until no coalition change improves welfare beyond `epsilon`.
4. **Payoff distribution**: `allocate_payoffs` splits coalition value proportionally to each leader’s solo value; `distribute_to_units` then divides a leader’s share across its servers and vehicles using weighted capacity/demand.
5. **Time slices**: `simulate_time_slices` and `evaluate_time_slice` run the formation algorithm for each request period, gathering welfare, coalition sizes, and allocations.
6. **Integrity + reporting**: `TrustedEnclave` signs each slice summary, `TrustedLedger` persists entries, and `plot_results` emits PNGs for welfare, payoffs, and coalition sizes.
7. **Demo**: `demo()` seeds four leaders with servers/vehicles, iterates three time slices of extra requests, prints coalition/payoff details, records them, and plots results.

## Quickstart
```bash
python logic.py
```
- Requires `matplotlib` if you want PNG charts; without it the code still prints coalition and payoff summaries.
- Outputs go to stdout, plus `ledger.jl` and `coalition_*.png` files when plotting is available.

## Learning and extension ideas
- Adjust leader/server/vehicle parameters or per-period requests to observe how coalition structures and welfare change.
- Try alternative value functions (e.g., heavier penalties for coordination, or rewards for smaller coalitions) by passing a custom `value_fn` into `dynamic_coalition_formation`.
- Experiment with different payoff schemes (equal split, Shapley approximations) and compare fairness vs. efficiency.
- Add input/loading of request traces from JSON/CSV and persist richer metrics (e.g., unmet demand) to the ledger.
